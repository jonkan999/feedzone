---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Order Confirmed - Feed Zone">
  <div class="container mx-auto px-4 py-12">
    <div class="max-w-2xl mx-auto text-center">
      <div class="!mb-8">
        <div class="text-6xl mb-4">✓</div>
        <h1 class="text-4xl font-bold text-primary !mb-4">Order bekräftad!</h1>
        <p class="text-text-muted text-xl !mb-8">
          Tack för din beställning. Du kommer att få ett bekräftelsemail inom kort.
        </p>
      </div>
      
      <div id="order-details" class="bg-surface rounded-lg shadow-md !p-6 !mb-8">
        <p class="text-text-muted">Laddar orderdetaljer...</p>
      </div>

      <div class="space-x-4">
        <a href="/account/orders" class="inline-block bg-primary text-white px-6 py-3 !mr-2 rounded-lg hover:opacity-90 transition-opacity">
          Visa ordrar
        </a>
        <a href="/products" class="inline-block bg-accent text-white px-6 py-3 !ml-2 rounded-lg hover:opacity-90 transition-opacity">
          Fortsätt handla
        </a>
      </div>
    </div>
  </div>
</Layout>

<script>
  if (typeof window !== 'undefined') {
    // Clear cart on successful order
    localStorage.removeItem('feedzone-cart');
    window.dispatchEvent(new Event('cart-updated'));

    // Get session ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const sessionId = urlParams.get('session_id');

    if (sessionId) {
      const orderDetails = document.getElementById('order-details');
      if (orderDetails) {
        orderDetails.innerHTML = `
          <p class="text-text-muted">Din betalning har behandlats framgångsrikt.</p>
          <p class="text-sm text-text-muted !mt-2 !mb-4">Sessions-ID: ${sessionId}</p>
        `;
      }
    }
  }
</script>

<style>
  .container {
    max-width: 1200px;
    margin: 0 auto;
  }
</style>

